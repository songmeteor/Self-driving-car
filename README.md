# Self-driving-car

### 프로젝트 보고서 
https://lopsided-tray-d39.notion.site/Design-Self-driving-car-Using-Atmega128-1c104872d73a8020866ad606ecfb219a?pvs=74


# 🛻 Bluetooth & Ultrasonic 기반 자율주행 스마트카

본 프로젝트는 수동 모드와 자동 모드를 지원하는 스마트카 시스템입니다. 수동 모드는 블루투스를 통해 직접 제어하고, 자동 모드는 초음파 센서를 활용해 장애물을 인식하고 자율적으로 주행합니다.

## 📌 프로젝트 개요

- **수동 모드 (Manual)** : Bluetooth (UART) 문자(f, b, l, r, s)를 통해 모터 제어
- **자동 모드 (Auto)** : 초음파 센서(3개)를 이용해 거리 감지 → 회피 주행 알고리즘 수행
- **버튼 기능** : 수동 <-> 자동 모드 전환, 자동 모드 내 음향 변경
- **출력 장치**
  - **LED** : 속도에 따라 Blink 주기 변화
  - **FND** : 현재 모드 (S/A), 속도 출력
  - **LCD** : 현재 모드, 이동 거리, 초음파 거리 출력
  - **BUZZER** : 모드에 따라 사이렌/동요 재생

---

## 🔧 주요 구현 기능

### ✅ 1. 수동 모드 (Manual Mode)
- **Bluetooth (HC-06)** 모듈을 통해 UART 수신 문자에 따라 전진/후진/회전/정지 제어
- PWM을 통한 속도 제어 (Timer1 활용)

### ✅ 2. 자동 모드 (Auto Mode)
- **초음파 센서 3개** (좌/중/우) → 거리 계산 (INT4~6, Timer2)
- 거리 기반 회피 알고리즘 구현 (직각 코너 대응 포함)
- 모드에 따라 **사이렌** or **동요** 재생 (Timer3 + Buzzer)

### ✅ 3. 출력 장치 구성
- **LED Blink**: 속도에 따라 점멸 주기 변화
- **FND**: 현재 모드(S/A) 및 속도 출력
- **LCD (I2C)**:
  - 1라인: 모드 + 총 이동 거리
  - 2라인: 좌/중/우 초음파 거리

---

## 🧠 기술 포인트

- **FSM 설계**를 통한 수동/자동 모드 관리
- **PWM** 기반 DC 모터 제어 (L298N + Timer1)
- **인터럽트 기반 거리 측정** (Echo 상승/하강 엣지 감지)
- **UART 통신(Bluetooth)**, **I2C 통신(LCD)** 프로토콜 구현
- **Timer/Counter, Delay 최소화**, 인터럽트 기반 동작 구조

---

## 🧪 개선 사항 및 회고

- 처음엔 직각 코너 통과 불가 → 트리거 주기 감소 및 회전 속도 증가
- 좌우 상대 거리 기반 판단 로직 추가 → 벽에 충돌 감소
- Buzzer는 전역 index → `static` 지역변수로 개선 가능
- 통신 및 제어 구조 설계에서 **임베디드 시스템 설계의 본질**을 체험

---
